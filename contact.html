<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="style.css">
  <title>Contact Page</title>
</head>
<body>
  <section class="contactlist">
    <header>
      <h1>More</h1>
      <h1 class="toggle"></h1>
      <h2 class="head">Be healthy</h2>
    </header>

    <div class="contactform">
      <h2>Contact us</h2>
      <form>
        <label for="name">Name:</label>
        <input type="text" id="name" name="name" placeholder="Enter your name..." required><br>
        <label for="email">Email:</label>
        <input type="email" id="email" name="email" placeholder="Enter your email..." required><br>
        <label for="message">Message:</label>
        <textarea maxlength="100" name="message" id="message" placeholder="Enter your thoughts..."></textarea><br>
        <button type="submit">Submit</button>
      </form>
    </div>

    <!-- Button to view saved data -->
    <button id="viewReviewsBtn">View Reviews</button>

    <!-- Section to display saved data (hidden by default) -->
    <div class="saved-data" id="savedData" style="display: none;">
      <h2>Saved Submissions</h2>
      <ul id="submissionsList"></ul>
    </div>
  </section>

  <div class="menu">
    <ul class="innermenu">
      <li><a href="index.html">Home</a></li>
      <li><a href="about.html">About</a></li>
      <li><a href="game.html">Game</a></li>
      <li><a href="contact.html">Contact</a></li>
    </ul>
  </div>

  <script>
    // Toggle menu script
    document.addEventListener("DOMContentLoaded", () => {
      const toggle = document.querySelector(".toggle");
      const menu = document.querySelector(".menu");
      const contactlist = document.querySelector(".contactlist");
      toggle.addEventListener("click", () => {
        toggle.classList.toggle("active");
        menu.classList.toggle("active");
        contactlist.classList.toggle("active");
      });
    });

    const form = document.querySelector("form");
    const submissionsList = document.getElementById("submissionsList");
    const savedData = document.getElementById("savedData");
    const viewBtn = document.getElementById("viewReviewsBtn");

    // Function to display stored data
    function displaySubmissions() {
      submissionsList.innerHTML = "";
      const submissions = JSON.parse(localStorage.getItem("contactSubmissions")) || [];

      if (submissions.length === 0) {
        submissionsList.innerHTML = "<li>No reviews yet.</li>";
        return;
      }

      submissions.forEach((item, index) => {
        const li = document.createElement("li");
        li.innerHTML = `
          ${index + 1}. <strong>${item.name}</strong> (${item.email}) - 
          "${item.message}" [${item.timestamp}] 
          <button class="deleteBtn" data-index="${index}">Delete</button>
        `;
        submissionsList.appendChild(li);
      });

      // Add delete functionality to each button
      document.querySelectorAll(".deleteBtn").forEach(btn => {
        btn.addEventListener("click", (e) => {
          const index = e.target.getAttribute("data-index");
          deleteSubmission(index);
        });
      });
    }

    // Delete a review
    function deleteSubmission(index) {
      let submissions = JSON.parse(localStorage.getItem("contactSubmissions")) || [];
      submissions.splice(index, 1); // remove by index
      localStorage.setItem("contactSubmissions", JSON.stringify(submissions));
      displaySubmissions(); // refresh list
    }

    // On form submit
    form.addEventListener("submit", function (e) {
      e.preventDefault();

      const name = document.getElementById("name").value;
      const email = document.getElementById("email").value;
      const message = document.getElementById("message").value;

      const formData = {
        name,
        email,
        message,
        timestamp: new Date().toLocaleString()
      };

      const existing = JSON.parse(localStorage.getItem("contactSubmissions")) || [];
      existing.push(formData);

      localStorage.setItem("contactSubmissions", JSON.stringify(existing));

      alert("Form data saved locally!");
      form.reset();
    });

    // Show/Hide reviews on button click
    viewBtn.addEventListener("click", () => {
      if (savedData.style.display === "none") {
        displaySubmissions();
        savedData.style.display = "block";
        viewBtn.textContent = "Hide Reviews";
      } else {
        savedData.style.display = "none";
        viewBtn.textContent = "View Reviews";
      }
    });
  </script>
</body>
</html>
